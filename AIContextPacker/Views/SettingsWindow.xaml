<Window x:Class="AIContextPacker.Views.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Settings" Height="600" Width="700"
        Background="{DynamicResource BackgroundBrush}"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize">
    
    <Window.Resources>
        <Style TargetType="Button" x:Key="PrimaryButton">
            <Setter Property="Background" Value="{DynamicResource PrimaryBrush}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Padding" Value="15,8"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="MinWidth" Value="100"/>
        </Style>
    </Window.Resources>

    <DockPanel Margin="20">
        <!-- Buttons at bottom -->
        <StackPanel DockPanel.Dock="Bottom" 
                    Orientation="Horizontal" 
                    HorizontalAlignment="Right"
                    Margin="0,20,0,0">
            <Button Content="Save" 
                    Style="{StaticResource PrimaryButton}"
                    Click="Save_Click"
                    Margin="0,0,10,0"/>
            <Button Content="Cancel" 
                    Click="Cancel_Click"
                    MinWidth="100"
                    Padding="15,8"/>
        </StackPanel>

        <!-- Settings Content -->
        <ScrollViewer VerticalScrollBarVisibility="Auto">
            <StackPanel>
                <!-- Theme Settings -->
                <GroupBox Header="Theme" 
                          Margin="0,0,0,20"
                          Foreground="{DynamicResource TextBrush}">
                    <StackPanel Margin="10">
                        <TextBlock Text="Choose your preferred theme:"
                                   Foreground="{DynamicResource SecondaryTextBrush}"
                                   Margin="0,0,0,10"/>
                        <RadioButton x:Name="LightThemeRadio"
                                     Content="Light"
                                     GroupName="Theme"
                                     Margin="0,5"
                                     Foreground="{DynamicResource TextBrush}"/>
                        <RadioButton x:Name="DarkThemeRadio"
                                     Content="Dark"
                                     GroupName="Theme"
                                     Margin="0,5"
                                     Foreground="{DynamicResource TextBrush}"/>
                        <RadioButton x:Name="SystemThemeRadio"
                                     Content="System Default"
                                     GroupName="Theme"
                                     Margin="0,5"
                                     Foreground="{DynamicResource TextBrush}"/>
                    </StackPanel>
                </GroupBox>

                <!-- General Settings -->
                <GroupBox Header="General" 
                          Margin="0,0,0,20"
                          Foreground="{DynamicResource TextBrush}">
                    <StackPanel Margin="10">
                        <StackPanel Orientation="Horizontal" Margin="0,5">
                            <TextBlock Text="Max Characters Limit:" 
                                       Width="200"
                                       VerticalAlignment="Center"
                                       Foreground="{DynamicResource TextBrush}"/>
                            <TextBox Width="150" 
                                     Text="{Binding MaxCharsLimit}"
                                     Padding="5"/>
                        </StackPanel>
                        <CheckBox Content="Include file headers in output" 
                                  IsChecked="{Binding IncludeFileHeaders}"
                                  Margin="0,10"
                                  Foreground="{DynamicResource TextBrush}"/>
                    </StackPanel>
                </GroupBox>

                <!-- Allowed Extensions -->
                <GroupBox Header="Allowed File Extensions (Whitelist)" 
                          Margin="0,0,0,20"
                          Foreground="{DynamicResource TextBrush}">
                    <StackPanel Margin="10">
                        <TextBlock Text="Enter file extensions separated by commas (e.g., .cs, .js, .py)"
                                   TextWrapping="Wrap"
                                   Margin="0,0,0,10"
                                   Foreground="{DynamicResource SecondaryTextBrush}"/>
                        <TextBox Height="80" 
                                 TextWrapping="Wrap"
                                 AcceptsReturn="True"
                                 VerticalScrollBarVisibility="Auto"
                                 x:Name="ExtensionsTextBox"/>
                    </StackPanel>
                </GroupBox>

                <!-- Global Prompts -->
                <GroupBox Header="Global Prompts" 
                          Margin="0,0,0,20"
                          Foreground="{DynamicResource TextBrush}">
                    <DockPanel Margin="10">
                        <StackPanel DockPanel.Dock="Bottom" 
                                    Orientation="Horizontal" 
                                    Margin="0,10,0,0">
                            <Button Content="Add New" 
                                    Click="AddPrompt_Click"
                                    Margin="0,0,5,0"
                                    Padding="10,5"/>
                            <Button Content="Edit" 
                                    Click="EditPrompt_Click"
                                    Margin="0,0,5,0"
                                    Padding="10,5"/>
                            <Button Content="Delete" 
                                    Click="DeletePrompt_Click"
                                    Padding="10,5"/>
                        </StackPanel>
                        <ListBox x:Name="PromptsListBox"
                                 DisplayMemberPath="Name"
                                 Height="150"
                                 Background="{DynamicResource SurfaceBrush}"
                                 Foreground="{DynamicResource TextBrush}"/>
                    </DockPanel>
                </GroupBox>

                <!-- Custom Git Ignore Filters -->
                <GroupBox Header="Git Ignore Filters (Custom)" 
                          Foreground="{DynamicResource TextBrush}">
                    <DockPanel Margin="10">
                        <TextBlock DockPanel.Dock="Top"
                                   Text="Create your own custom ignore filters. Predefined filters (Backend, Frontend, etc.) are managed in the main window."
                                   TextWrapping="Wrap"
                                   Margin="0,0,0,10"
                                   Foreground="{DynamicResource SecondaryTextBrush}"
                                   FontStyle="Italic"/>
                        <StackPanel DockPanel.Dock="Bottom" 
                                    Orientation="Horizontal" 
                                    Margin="0,10,0,0">
                            <Button Content="Add New Filter" 
                                    Click="AddFilter_Click"
                                    Margin="0,0,5,0"
                                    Padding="10,5"/>
                            <Button Content="Edit Filter" 
                                    Click="EditFilter_Click"
                                    Margin="0,0,5,0"
                                    Padding="10,5"/>
                            <Button Content="Delete Filter" 
                                    Click="DeleteFilter_Click"
                                    Padding="10,5"/>
                        </StackPanel>
                        <ListBox x:Name="FiltersListBox"
                                 DisplayMemberPath="Name"
                                 Height="150"
                                 Background="{DynamicResource SurfaceBrush}"
                                 Foreground="{DynamicResource TextBrush}"/>
                    </DockPanel>
                </GroupBox>
            </StackPanel>
        </ScrollViewer>
    </DockPanel>
</Window>
